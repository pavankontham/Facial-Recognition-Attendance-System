(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[894],{1629:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},3761:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},4622:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},5041:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},5077:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},8051:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},7232:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},1408:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3777:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]])},8142:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},4933:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},9525:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},1352:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6651:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/student/browse-classes",function(){return t(738)}])},738:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return BrowseClasses}});var a=t(5893),l=t(7294),r=t(6266),n=t(3022),i=t(6501),c=t(8815),o=t(3761);function BrowseClasses(){let{currentUser:e,userProfile:s}=(0,r.a)(),[t,d]=(0,l.useState)([]),[x,m]=(0,l.useState)([]),[u,h]=(0,l.useState)(!0),[g,y]=(0,l.useState)({});async function fetchData(){try{h(!0),console.log("Starting to fetch data..."),console.log("Fetching available classes...");let{data:s,error:t}=await c.T.getAvailableClasses();console.log("Available classes result:",{availableData:s,availableError:t}),t?(console.error("Error fetching available classes:",t),t.message&&t.message.includes("Failed to fetch")?i.Am.error("Unable to connect to server. Please make sure the backend is running."):i.Am.error("Failed to load available classes: "+(t.message||"Unknown error")),d([])):(console.log("Setting available classes:",s),d(s||[])),console.log("Fetching my enrolled classes for user:",e.uid);let{data:a,error:l}=await c.T.getClassesByStudent(e.uid);console.log("My classes result:",{myData:a,myError:l}),l?(console.error("Error fetching my classes:",l),l.message&&l.message.includes("Failed to fetch")?i.Am.error("Unable to connect to server for enrolled classes."):i.Am.error("Failed to load your classes: "+(l.message||"Unknown error")),m([])):(console.log("Setting my classes:",a),m(a||[]))}catch(e){console.error("Error fetching data:",e),e.message&&e.message.includes("Failed to fetch")?i.Am.error("Connection error: Please check if the backend server is running on http://localhost:8000"):i.Am.error("Failed to load classes: "+e.message)}finally{h(!1)}}async function handleJoinClass(s,t){try{console.log("Attempting to join class:",{classId:s,className:t,userId:e.uid}),y(e=>({...e,[s]:!0}));let{data:a,error:l}=await c.T.joinClass(s,e.uid);console.log("Join class result:",{data:a,error:l}),l?(console.error("Join class error:",l),i.Am.error(l.message)):(console.log("Successfully joined class:",a),i.Am.success("Successfully joined ".concat(t,"!")),fetchData())}catch(e){console.error("Error joining class:",e),i.Am.error("Failed to join class")}finally{y(e=>({...e,[s]:!1}))}}function isAlreadyEnrolled(e){return x.some(s=>s.id===e&&"approved"===s.status)}return((0,l.useEffect)(()=>{console.log("Browse Classes - useEffect triggered:",{currentUser:!!e,userProfile:s,role:null==s?void 0:s.role}),e&&(null==s?void 0:s.role)==="student"?(console.log("Fetching data for student..."),fetchData()):console.log("Not fetching data - conditions not met")},[e,s]),e&&(null==s?void 0:s.role)==="student")?(0,a.jsx)(n.Z,{children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto space-y-8",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-green-600 to-blue-600 rounded-2xl p-8 text-white shadow-2xl",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between space-y-6 lg:space-y-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-white/20 rounded-2xl flex items-center justify-center backdrop-blur-sm shadow-lg",children:(0,a.jsx)(o.Z,{className:"h-10 w-10 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-4xl lg:text-5xl font-bold mb-2",children:"Browse Classes"}),(0,a.jsx)("p",{className:"text-green-100 text-lg mb-2",children:"Discover and join new classes to expand your learning"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("span",{className:"text-sm bg-white/20 px-3 py-1 rounded-full",children:[t.length," Available"]}),(0,a.jsxs)("span",{className:"text-sm bg-white/20 px-3 py-1 rounded-full",children:[x.length," Enrolled"]})]})]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-3",children:(0,a.jsx)("button",{onClick:fetchData,disabled:u,className:"bg-white/20 hover:bg-white/30 text-white font-medium py-3 px-6 rounded-xl transition-all backdrop-blur-sm border border-white/20 hover:border-white/40 disabled:opacity-50",children:u?"Refreshing...":"Refresh"})})]})}),u?(0,a.jsx)("div",{className:"text-center py-16 bg-gradient-to-br from-gray-50 to-blue-50 rounded-2xl border border-gray-200",children:(0,a.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Loading Classes"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Please wait while we fetch the latest classes for you..."})]})}):(0,a.jsxs)("div",{className:"space-y-8",children:[x.length>0&&(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-8 shadow-lg border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:(0,a.jsx)(o.Z,{className:"h-4 w-4 text-green-600"})}),"My Enrolled Classes"]}),(0,a.jsxs)("span",{className:"bg-green-100 text-green-800 text-sm font-medium px-3 py-1 rounded-full",children:[x.length," Classes"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map(e=>(0,a.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200 rounded-xl p-6 hover:shadow-lg transition-all transform hover:scale-105",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:e.name}),(0,a.jsx)("span",{className:"bg-green-500 text-white text-xs font-medium px-2.5 py-1 rounded-full shadow-sm",children:"✓ Enrolled"})]}),(0,a.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,a.jsx)("span",{className:"font-medium",children:"Subject:"})," ",e.subject]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,a.jsx)("span",{className:"font-medium",children:"Teacher:"})," ",e.teacher_name]})]}),e.description&&(0,a.jsx)("p",{className:"text-sm text-gray-700 mb-4 line-clamp-2",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-green-200",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Joined: ",new Date(e.enrolled_at).toLocaleDateString()]}),(0,a.jsx)("button",{className:"text-green-600 hover:text-green-700 text-sm font-medium",children:"View Details"})]})]},e.id))})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-8 shadow-lg border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:(0,a.jsx)(o.Z,{className:"h-4 w-4 text-blue-600"})}),"Available Classes"]}),(0,a.jsxs)("span",{className:"bg-blue-100 text-blue-800 text-sm font-medium px-3 py-1 rounded-full",children:[t.length," Available"]})]}),0===t.length?(0,a.jsx)("div",{className:"text-center py-16 bg-gradient-to-br from-gray-50 to-blue-50 rounded-xl border border-gray-200",children:(0,a.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,a.jsx)(o.Z,{className:"h-8 w-8 text-gray-400"})}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Classes Available"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"There are no classes available at the moment. Check back later or contact your administrator."}),(0,a.jsx)("button",{onClick:fetchData,className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-lg transition-colors",children:"Refresh Classes"})]})}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>{let s=isAlreadyEnrolled(e.id),t=g[e.id];return(0,a.jsxs)("div",{className:"bg-gradient-to-br from-white to-blue-50 border border-gray-200 rounded-xl p-6 hover:shadow-xl transition-all transform hover:scale-105 hover:border-blue-300",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 line-clamp-2",children:e.name}),s&&(0,a.jsx)("span",{className:"bg-green-500 text-white text-xs font-medium px-2.5 py-1 rounded-full shadow-sm",children:"✓ Enrolled"})]}),(0,a.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[(0,a.jsx)("span",{className:"font-medium",children:"Subject:"})," ",e.subject]})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[(0,a.jsx)("span",{className:"font-medium",children:"Teacher:"})," ",e.teacher_name]})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[(0,a.jsx)("span",{className:"font-medium",children:"Students:"})," ",e.enrolled_students]})]})]}),e.description&&(0,a.jsx)("p",{className:"text-sm text-gray-700 mb-4 line-clamp-3 bg-gray-50 p-3 rounded-lg",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Created: ",new Date(e.created_at).toLocaleDateString()]}),s?(0,a.jsx)("button",{className:"text-green-600 hover:text-green-700 text-sm font-medium",children:"View Details"}):(0,a.jsx)("button",{onClick:()=>handleJoinClass(e.id,e.name),disabled:t,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white text-sm font-medium py-2 px-4 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105 shadow-md",children:t?(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-2"}),"Joining..."]}):"Join Class"})]})]},e.id)})})]})]})]})}):(0,a.jsx)(n.Z,{children:(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-gray-600",children:"This page is only accessible to students."})})})}}},function(e){e.O(0,[701,22,774,888,179],function(){return e(e.s=6651)}),_N_E=e.O()}]);