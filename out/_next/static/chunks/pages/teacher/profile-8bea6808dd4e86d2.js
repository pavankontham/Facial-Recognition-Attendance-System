(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[13],{1629:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s.Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},3761:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s.Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},4622:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s.Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},5041:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s.Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},5077:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},8051:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},6953:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},7232:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s.Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},5169:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s.Z)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]])},3696:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s.Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},1408:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s.Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},9455:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s.Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},3777:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s.Z)("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]])},8142:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s.Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},4933:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},9525:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},1352:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6275:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/teacher/profile",function(){return r(6602)}])},6602:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return TeacherProfile}});var s=r(5893),a=r(7294),l=r(3022),n=r(6266),i=r(8815),c=r(4933),o=r(5169),d=r(3696),u=r(1352),h=r(6953),x=r(9455),m=r(3761),f=r(4622),p=r(5041),y=r(8142),g=r(6501),b=r(2907);function TeacherProfile(){let{currentUser:e,userProfile:t,refreshUserProfile:r}=(0,n.a)(),[j,v]=(0,a.useState)(null),[N,w]=(0,a.useState)(null),[k,Z]=(0,a.useState)(null),[P,C]=(0,a.useState)(!1),[S,M]=(0,a.useState)(!1),[E,_]=(0,a.useState)(!0),[L,z]=(0,a.useState)(!1),[F,U]=(0,a.useState)(!1),[q,T]=(0,a.useState)({name:"",subject:""}),O=(0,a.useRef)(null),R=(0,a.useRef)(null),I=(0,a.useRef)(null),[B,H]=(0,a.useState)(null);async function fetchProfilePhoto(){try{let{data:t}=await i.T.getProfilePhoto(e.uid);t&&t.profile_photo_url&&(v(t.profile_photo_url),Z(t.profile_photo_url))}catch(e){console.error("Error fetching profile photo:",e)}finally{_(!1)}}function handleFileSelect(e){let t=e.target.files[0];if(t){if(!t.type.startsWith("image/")){g.ZP.error("Please select an image file");return}if(t.size>5242880){g.ZP.error("File size must be less than 5MB");return}w(t);let e=URL.createObjectURL(t);Z(e)}}async function handleUpload(){if(!N){g.ZP.error("Please select a photo first");return}C(!0);try{let{data:t,error:r}=await i.T.saveProfilePhoto(e.uid,N);if(r){g.ZP.error(r.message);return}v(t.profile_photo_url),w(null),g.ZP.success("Profile photo updated successfully!")}catch(e){g.ZP.error("Failed to upload profile photo")}finally{C(!1)}}async function startCamera(){try{let e=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480},facingMode:"user"}});H(e),R.current&&(R.current.srcObject=e),M(!0)}catch(e){console.error("Error accessing camera:",e),g.ZP.error("Could not access camera. Please check permissions.")}}function stopCamera(){B&&(B.getTracks().forEach(e=>e.stop()),H(null)),M(!1)}function capturePhoto(){if(R.current&&I.current){let e=I.current,t=R.current;e.width=t.videoWidth,e.height=t.videoHeight;let r=e.getContext("2d");r.drawImage(t,0,0),e.toBlob(e=>{let t=new File([e],"camera-photo.jpg",{type:"image/jpeg"});w(t);let r=URL.createObjectURL(e);Z(r),stopCamera()},"image/jpeg",.8)}}function resetPhoto(){w(null),Z(j),O.current&&(O.current.value="")}function handleEditClick(){z(!0),T({name:(null==t?void 0:t.name)||"",subject:(null==t?void 0:t.subject)||""})}function handleCancelEdit(){z(!1),T({name:(null==t?void 0:t.name)||"",subject:(null==t?void 0:t.subject)||""})}async function handleSaveProfile(){if(!q.name.trim()){g.ZP.error("Name is required");return}if(!q.subject.trim()){g.ZP.error("Subject is required");return}try{U(!0);let{data:t,error:s}=await i.T.updateUserProfile(e.uid,{name:q.name.trim(),subject:q.subject.trim()});if(s){g.ZP.error(s.message);return}g.ZP.success("Profile updated successfully!"),z(!1),r&&await r()}catch(e){console.error("Error updating profile:",e),g.ZP.error("Failed to update profile. Please try again.")}finally{U(!1)}}return((0,a.useEffect)(()=>{e&&fetchProfilePhoto()},[e]),(0,a.useEffect)(()=>{t&&T({name:t.name||"",subject:t.subject||""})},[t]),E)?(0,s.jsx)(l.Z,{children:(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)("div",{className:"loading-spinner"})})}):(0,s.jsx)(l.Z,{children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 rounded-2xl p-8 text-white",children:(0,s.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,s.jsxs)("div",{className:"relative",children:[k?(0,s.jsx)("img",{src:k,alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-4 border-white/30 shadow-lg"}):(0,s.jsx)("div",{className:"w-24 h-24 rounded-full bg-white/20 flex items-center justify-center border-4 border-white/30",children:(0,s.jsx)(c.Z,{className:"h-12 w-12 text-white/80"})}),N&&(0,s.jsx)("div",{className:"absolute -bottom-2 -right-2 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center border-2 border-white",children:(0,s.jsx)(o.Z,{className:"h-4 w-4 text-white"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-4xl font-bold mb-2",children:"Teacher Profile"}),(0,s.jsx)("p",{className:"text-purple-100 text-lg",children:"Manage your profile information and photo"})]})]})}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-8 shadow-lg border border-gray-100",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,s.jsx)(c.Z,{className:"h-6 w-6 text-purple-600 mr-3"}),"Profile Information"]}),L?(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsxs)("button",{onClick:handleSaveProfile,disabled:F,className:"flex items-center px-4 py-2 text-green-600 hover:text-green-700 hover:bg-green-50 rounded-lg transition-colors border border-green-200 disabled:opacity-50",children:[(0,s.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),F?"Saving...":"Save"]}),(0,s.jsxs)("button",{onClick:handleCancelEdit,disabled:F,className:"flex items-center px-4 py-2 text-gray-600 hover:text-gray-700 hover:bg-gray-50 rounded-lg transition-colors border border-gray-200 disabled:opacity-50",children:[(0,s.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Cancel"]})]}):(0,s.jsxs)("button",{onClick:handleEditClick,className:"flex items-center px-4 py-2 text-purple-600 hover:text-purple-700 hover:bg-purple-50 rounded-lg transition-colors border border-purple-200",children:[(0,s.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-gray-50 rounded-lg",children:[(0,s.jsx)(c.Z,{className:"h-5 w-5 text-gray-600"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Full Name"}),L?(0,s.jsx)("input",{type:"text",value:q.name,onChange:e=>T({...q,name:e.target.value}),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your full name"}):(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:null==t?void 0:t.name})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-gray-50 rounded-lg",children:[(0,s.jsx)(h.Z,{className:"h-5 w-5 text-gray-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Email Address"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:null==t?void 0:t.email}),L&&(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-gray-50 rounded-lg",children:[(0,s.jsx)(x.Z,{className:"h-5 w-5 text-gray-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Role"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900 capitalize",children:null==t?void 0:t.role})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-gray-50 rounded-lg",children:[(0,s.jsx)(m.Z,{className:"h-5 w-5 text-gray-600"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Subject"}),L?(0,s.jsx)(b.Z,{value:q.subject,onChange:e=>T({...q,subject:e}),placeholder:"Enter your subject",className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}):(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:(null==t?void 0:t.subject)||"Not specified"})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-gray-50 rounded-lg",children:[(0,s.jsx)(f.Z,{className:"h-5 w-5 text-gray-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Member Since"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:(null==t?void 0:t.created_at)?new Date(t.created_at).toLocaleDateString():"N/A"})]})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-8 shadow-lg border border-gray-100",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,s.jsx)(p.Z,{className:"h-6 w-6 text-purple-600 mr-3"}),"Profile Photo"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"relative inline-block",children:[k?(0,s.jsx)("img",{src:k,alt:"Profile Preview",className:"w-48 h-48 rounded-full object-cover border-4 border-gray-200 shadow-lg mx-auto"}):(0,s.jsx)("div",{className:"w-48 h-48 rounded-full bg-gray-200 flex items-center justify-center border-4 border-gray-200 mx-auto",children:(0,s.jsx)(c.Z,{className:"h-24 w-24 text-gray-400"})}),N&&(0,s.jsx)("div",{className:"absolute -bottom-2 -right-2 w-12 h-12 bg-green-500 rounded-full flex items-center justify-center border-4 border-white shadow-lg",children:(0,s.jsx)(o.Z,{className:"h-6 w-6 text-white"})})]}),(0,s.jsx)("p",{className:"mt-4 text-sm text-gray-600",children:N?"New photo selected":"Current profile photo"})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Upload Options"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,s.jsxs)("button",{onClick:()=>{var e;return null===(e=O.current)||void 0===e?void 0:e.click()},className:"flex items-center justify-center px-6 py-4 bg-blue-50 hover:bg-blue-100 text-blue-700 font-medium rounded-xl transition-colors border-2 border-blue-200 hover:border-blue-300",children:[(0,s.jsx)(y.Z,{className:"h-5 w-5 mr-2"}),"Choose File"]}),(0,s.jsxs)("button",{onClick:startCamera,className:"flex items-center justify-center px-6 py-4 bg-green-50 hover:bg-green-100 text-green-700 font-medium rounded-xl transition-colors border-2 border-green-200 hover:border-green-300",children:[(0,s.jsx)(p.Z,{className:"h-5 w-5 mr-2"}),"Take Photo"]})]}),(0,s.jsx)("input",{ref:O,type:"file",accept:"image/*",onChange:handleFileSelect,className:"hidden"})]}),N&&(0,s.jsxs)("div",{className:"space-y-4 p-4 bg-gray-50 rounded-lg",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Selected File:"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:N.name}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[(N.size/1024/1024).toFixed(2)," MB"]})]})}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("button",{onClick:handleUpload,disabled:P,className:"flex-1 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white font-semibold py-3 px-4 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:P?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"inline-block w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Uploading..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Z,{className:"h-4 w-4 inline mr-2"}),"Save Photo"]})}),(0,s.jsx)("button",{onClick:resetPhoto,className:"px-4 py-3 text-gray-600 hover:text-gray-800 hover:bg-gray-200 rounded-xl transition-colors",children:"Cancel"})]})]}),(0,s.jsxs)("div",{className:"text-sm text-gray-500 space-y-1",children:[(0,s.jsx)("p",{children:"• Supported formats: JPG, PNG, GIF"}),(0,s.jsx)("p",{children:"• Maximum file size: 5MB"}),(0,s.jsx)("p",{children:"• Recommended: Square images (1:1 ratio)"})]})]})]})]}),S&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Take Photo"}),(0,s.jsx)("button",{onClick:stopCamera,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,s.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("video",{ref:R,autoPlay:!0,playsInline:!0,className:"w-full rounded-lg bg-gray-900"}),(0,s.jsx)("canvas",{ref:I,className:"hidden"}),(0,s.jsxs)("button",{onClick:capturePhoto,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-xl transition-colors",children:[(0,s.jsx)(p.Z,{className:"h-5 w-5 inline mr-2"}),"Capture Photo"]})]})]})})]})})}},2907:function(e,t,r){"use strict";r.d(t,{Z:function(){return SubjectInput}});var s=r(5893),a=r(7294),l=r(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,l.Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var i=r(3761);let c=["Mathematics","Physics","Chemistry","Biology","Computer Science","English","History","Geography","Economics","Business Studies","Art","Music","Physical Education","Psychology","Philosophy","Political Science","Sociology","Statistics","Engineering","Medicine"];function SubjectInput(e){let{value:t,onChange:r,placeholder:l="Enter subject name",className:o="",required:d=!1,existingSubjects:u=[]}=e,[h,x]=(0,a.useState)(!1),[m,f]=(0,a.useState)([]),p=(0,a.useRef)(null),y=(0,a.useRef)(null),g=[...new Set([...u,...c])].sort();function handleInputChange(e){let t=e.target.value;r(t),x(!0)}function handleSubjectSelect(e){var t;r(e),x(!1),null===(t=p.current)||void 0===t||t.focus()}function handleInputFocus(){x(!0)}function handleKeyDown(e){"Escape"===e.key&&x(!1)}return(0,a.useEffect)(()=>{if(t){let e=g.filter(e=>e.toLowerCase().includes(t.toLowerCase())&&e.toLowerCase()!==t.toLowerCase());f(e.slice(0,8))}else f(g.slice(0,8))},[t,g]),(0,a.useEffect)(()=>{function handleClickOutside(e){!y.current||y.current.contains(e.target)||p.current.contains(e.target)||x(!1)}return document.addEventListener("mousedown",handleClickOutside),()=>document.removeEventListener("mousedown",handleClickOutside)},[]),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{ref:p,type:"text",value:t,onChange:handleInputChange,onFocus:handleInputFocus,onKeyDown:handleKeyDown,placeholder:l,required:d,className:"".concat(o," pr-10")}),(0,s.jsx)("button",{type:"button",onClick:()=>x(!h),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:(0,s.jsx)(n,{className:"h-4 w-4 transition-transform ".concat(h?"rotate-180":"")})})]}),h&&m.length>0&&(0,s.jsxs)("div",{ref:y,className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[(0,s.jsx)("div",{className:"py-1",children:m.map((e,t)=>(0,s.jsxs)("button",{type:"button",onClick:()=>handleSubjectSelect(e),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-700 transition-colors flex items-center",children:[(0,s.jsx)(i.Z,{className:"h-4 w-4 mr-2 text-gray-400"}),e]},t))}),t&&!g.some(e=>e.toLowerCase()===t.toLowerCase())&&(0,s.jsxs)("div",{className:"border-t border-gray-200 py-2 px-4",children:[(0,s.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Create new subject:"}),(0,s.jsxs)("button",{type:"button",onClick:()=>handleSubjectSelect(t),className:"w-full text-left text-sm text-blue-600 hover:text-blue-700 font-medium",children:['+ "',t,'"']})]})]})]})}}},function(e){e.O(0,[701,22,774,888,179],function(){return e(e.s=6275)}),_N_E=e.O()}]);