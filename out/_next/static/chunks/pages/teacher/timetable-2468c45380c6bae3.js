(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[837],{1629:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},3761:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},4622:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},5041:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},5077:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},2852:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]])},8051:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},7232:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},1408:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3777:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]])},8142:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},4933:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},9525:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},1352:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},7985:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/teacher/timetable",function(){return t(5020)}])},5020:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return TeacherTimetable}});var a=t(5893),l=t(7294),r=t(3022),n=t(6266),i=t(8815),c=t(6501),o=t(3761),d=t(5077),u=t(2852),x=t(9525);let m=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],h=[{slot:1,start:"9:00 AM",end:"9:50 AM",label:"9:00 - 9:50 AM"},{slot:2,start:"9:50 AM",end:"10:40 AM",label:"9:50 - 10:40 AM"},{slot:"break1",start:"10:40 AM",end:"10:50 AM",label:"Break (10 min)",isBreak:!0},{slot:3,start:"10:50 AM",end:"11:40 AM",label:"10:50 - 11:40 AM"},{slot:4,start:"11:40 AM",end:"12:30 PM",label:"11:40 AM - 12:30 PM"},{slot:5,start:"12:30 PM",end:"1:20 PM",label:"12:30 - 1:20 PM"},{slot:6,start:"1:20 PM",end:"2:10 PM",label:"1:20 - 2:10 PM"},{slot:7,start:"2:10 PM",end:"3:00 PM",label:"2:10 - 3:00 PM"},{slot:"break2",start:"3:00 PM",end:"3:10 PM",label:"Break (10 min)",isBreak:!0},{slot:8,start:"3:10 PM",end:"4:00 PM",label:"3:10 - 4:00 PM"},{slot:9,start:"4:00 PM",end:"4:50 PM",label:"4:00 - 4:50 PM"}];function TeacherTimetable(){let{currentUser:e}=(0,n.a)(),[s,t]=(0,l.useState)([]),[y,g]=(0,l.useState)({}),[f,b]=(0,l.useState)(!0),[v,p]=(0,l.useState)(null),[k,j]=(0,l.useState)(!1);async function fetchData(){try{b(!0);let{data:s,error:a}=await i.T.getClassesByTeacher(e.uid);if(a){let e=a.message;e.includes("Database connection")?e="Unable to connect to database. Please try again.":e.includes("Teacher not found")&&(e="Teacher account not found. Please contact support."),c.ZP.error(e),t([])}else t(s||[]);let{data:l,error:r}=await i.T.getTimetableByTeacher(e.uid);if(r){console.error("Timetable error:",r);let e=r.message;e.includes("Database connection")&&(e="Unable to load timetable. Please try again."),c.ZP.error(e),g({})}else{let e={};(l||[]).forEach(s=>{let t="".concat(s.day_of_week,"-").concat(s.slot_number);e[t]=s}),g(e)}}catch(s){console.error("Error fetching data:",s);let e="Failed to load timetable data.";"TypeError"===s.name&&s.message.includes("fetch")?e="Network error. Please check your internet connection and try again.":s.message.includes("timeout")?e="Request timed out. Please try again in a moment.":s.message.includes("NetworkError")?e="Network connection failed. Please check your internet connection.":s.message.includes("500")?e="Server error. Please try again later or contact support.":s.message.includes("401")||s.message.includes("403")?e="Authentication error. Please refresh the page and try again.":s.message.includes("404")&&(e="Timetable service not found. Please contact support."),c.ZP.error(e),t([]),g({})}finally{b(!1)}}function handleSlotClick(e,s){var t;"string"!=typeof s&&(p({day:e+1,dayName:m[e],slot:s,timeLabel:null===(t=h.find(e=>e.slot===s))||void 0===t?void 0:t.label}),j(!0))}async function handleAssignClass(s){if(!s){c.ZP.error("Please select a class");return}if(!v){c.ZP.error("No time slot selected");return}try{let{error:t}=await i.T.createTimetable({class_id:s,day_of_week:v.day,slot_number:v.slot,teacher_firebase_id:e.uid});if(t){let e=t.message;e.includes("Invalid class ID")?e="Invalid class selected. Please try again.":e.includes("Day of week must be")?e="Invalid day selected. Please try again.":e.includes("Slot number must be")?e="Invalid time slot selected. Please try again.":e.includes("permission")?e="You don't have permission to modify this class.":e.includes("Database connection")&&(e="Connection error. Please try again in a moment."),c.ZP.error(e)}else c.ZP.success("Class assigned to timetable successfully!"),j(!1),p(null),fetchData()}catch(s){console.error("Error assigning class:",s);let e="Failed to assign class to timetable.";"TypeError"===s.name&&s.message.includes("fetch")?e="Network error. Please check your internet connection and try again.":s.message.includes("timeout")&&(e="Request timed out. Please try again."),c.ZP.error(e)}}function getSlotContent(e,s){let t="".concat(e+1,"-").concat(s),l=y[t];return l&&l.class?(0,a.jsxs)("div",{className:"h-full bg-blue-50 border-l-4 border-blue-500 p-2 hover:bg-blue-100 transition-colors cursor-pointer",children:[(0,a.jsx)("div",{className:"text-sm font-semibold text-blue-900 truncate",children:l.class.name}),(0,a.jsx)("div",{className:"text-xs text-blue-700",children:l.class.subject}),(0,a.jsxs)("div",{className:"text-xs text-blue-600 mt-1 flex items-center",children:[(0,a.jsx)(o.Z,{className:"h-3 w-3 mr-1"}),(0,a.jsx)("span",{children:"Class Assigned"})]})]}):(0,a.jsx)("div",{className:"h-full bg-gray-50 hover:bg-gray-100 transition-colors cursor-pointer flex items-center justify-center border-2 border-dashed border-gray-200",children:(0,a.jsx)("span",{className:"text-gray-400 text-xs",children:"Click to assign"})})}return((0,l.useEffect)(()=>{e&&fetchData()},[e]),f)?(0,a.jsx)(r.Z,{children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"loading-spinner"})})}):(0,a.jsx)(r.Z,{children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto space-y-8",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl p-8 text-white",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center backdrop-blur-sm",children:(0,a.jsx)(d.Z,{className:"h-8 w-8 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-4xl font-bold mb-2",children:"Weekly Timetable"}),(0,a.jsx)("p",{className:"text-indigo-100 text-lg",children:"Manage your class schedule"})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Weekly Schedule"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("div",{className:"min-w-full",children:[(0,a.jsxs)("div",{className:"grid grid-cols-7 gap-1 mb-1",children:[(0,a.jsx)("div",{className:"bg-gray-100 p-3 text-center font-semibold text-gray-700 rounded-lg",children:"Time"}),m.map(e=>(0,a.jsx)("div",{className:"bg-gray-100 p-3 text-center font-semibold text-gray-700 rounded-lg",children:e},e))]}),h.map(e=>(0,a.jsxs)("div",{className:"grid grid-cols-7 gap-1 mb-1",children:[(0,a.jsx)("div",{className:"p-3 text-center text-sm font-medium rounded-lg ".concat(e.isBreak?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"),children:e.isBreak?(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 mr-1"}),(0,a.jsx)("span",{className:"text-xs",children:"Break"})]}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-semibold",children:["Slot ",e.slot]}),(0,a.jsxs)("div",{className:"text-xs",children:[e.start," - ",e.end]})]})}),m.map((s,t)=>(0,a.jsx)("div",{className:"h-20 rounded-lg overflow-hidden",children:e.isBreak?(0,a.jsx)("div",{className:"h-full bg-orange-50 flex items-center justify-center",children:(0,a.jsx)(u.Z,{className:"h-5 w-5 text-orange-400"})}):(0,a.jsx)("div",{onClick:()=>handleSlotClick(t,e.slot),className:"h-full",children:getSlotContent(t,e.slot)})},"".concat(s,"-").concat(e.slot)))]},e.slot))]})})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Your Classes"}),0===s.length?(0,a.jsx)("p",{className:"text-gray-600",children:"No classes created yet. Create a class first to assign to timetable."}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(e=>(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(o.Z,{className:"h-5 w-5 text-blue-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.subject}),(0,a.jsxs)("div",{className:"flex items-center text-xs text-gray-500 mt-1",children:[(0,a.jsx)(x.Z,{className:"h-3 w-3 mr-1"}),e.student_count||0," students"]})]})]})},e.id))})]}),k&&v&&(0,a.jsx)(AssignClassModal,{slot:v,classes:s,onClose:()=>j(!1),onAssign:handleAssignClass})]})})}function AssignClassModal(e){let{slot:s,classes:t,onClose:r,onAssign:n}=e,[i,o]=(0,l.useState)("");function handleSubmit(e){if(e.preventDefault(),!i){c.ZP.error("Please select a class");return}n(parseInt(i))}return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Assign Class"}),(0,a.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsx)("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg",children:(0,a.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,a.jsx)("div",{className:"font-semibold",children:s.dayName}),(0,a.jsxs)("div",{children:["Slot ",s.slot,": ",s.timeLabel]})]})}),(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Class"}),(0,a.jsxs)("select",{value:i,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Choose a class..."}),t.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," - ",e.subject]},e.id))]})]}),(0,a.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,a.jsx)("button",{type:"button",onClick:r,className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-2 px-4 rounded-lg transition-colors",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Assign Class"})]})]})]})})}}},function(e){e.O(0,[701,22,774,888,179],function(){return e(e.s=7985)}),_N_E=e.O()}]);