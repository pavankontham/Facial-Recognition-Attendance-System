(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[431],{4297:function(e,t,r){"use strict";r.d(t,{Z:function(){return createLucideIcon}});var s=r(7294),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),createLucideIcon=(e,t)=>{let r=(0,s.forwardRef)(({color:r="currentColor",size:l=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:i="",children:c,...u},d)=>(0,s.createElement)("svg",{ref:d,...n,width:l,height:l,stroke:r,strokeWidth:o?24*Number(a)/Number(l):a,className:["lucide",`lucide-${toKebabCase(e)}`,i].join(" "),...u},[...t.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r}},2701:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var s=r(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s.Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},3761:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var s=r(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s.Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},5162:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var s=r(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s.Z)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]])},7349:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var s=r(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s.Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},4933:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var s=r(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},9525:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var s=r(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},7621:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/complete-profile",function(){return r(6592)}])},6592:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return CompleteProfile}});var s=r(5893),n=r(7294),l=r(1163),a=r(6266),o=r(8815),i=r(6501),c=r(5162),u=r(7349),d=r(4933),h=r(9525),m=r(2701),x=r(2907);function CompleteProfile(){let[e,t]=(0,n.useState)({name:"",role:"student",studentId:"",subject:""}),[r,f]=(0,n.useState)([]),[b,p]=(0,n.useState)(!1),{currentUser:y,userProfile:w}=(0,a.a)(),g=(0,l.useRouter)();async function fetchSubjects(){try{let{data:e,error:t}=await o.T.getAllSubjects();!t&&e&&f(e)}catch(e){console.error("Error fetching subjects:",e)}}function handleChange(r){t({...e,[r.target.name]:r.target.value})}async function handleSubmit(t){if(t.preventDefault(),!e.name||!e.role){i.ZP.error("Please fill in all required fields");return}if("student"===e.role&&!e.studentId){i.ZP.error("Student ID is required for students");return}if("teacher"===e.role&&!e.subject){i.ZP.error("Subject is required for teachers");return}try{p(!0);let t={firebase_id:y.uid,email:y.email,name:e.name,role:e.role,student_id:"student"===e.role?e.studentId:null,subject:"teacher"===e.role?e.subject:null,created_at:new Date().toISOString()},{error:r}=await o.T.createUser(t);if(r)throw Error(r.message);i.ZP.success("Profile completed successfully!"),"student"===e.role?g.push("/student/dashboard"):"teacher"===e.role&&g.push("/teacher/dashboard")}catch(e){console.error("Profile completion error:",e),i.ZP.error(e.message||"Failed to complete profile")}finally{p(!1)}}return((0,n.useEffect)(()=>{if(!y){g.push("/login");return}if(w){"student"===w.role?g.push("/student/dashboard"):"teacher"===w.role&&g.push("/teacher/dashboard");return}y.displayName&&t(e=>({...e,name:y.displayName})),fetchSubjects()},[y,w,g]),y)?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-600 via-purple-600 to-indigo-800 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"flex justify-center mb-6",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center backdrop-blur-sm",children:(0,s.jsx)(u.Z,{className:"h-8 w-8 text-white"})}),(0,s.jsx)("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-green-400 rounded-full flex items-center justify-center",children:(0,s.jsx)(c.Z,{className:"h-3 w-3 text-white"})})]})}),(0,s.jsx)("h2",{className:"text-4xl font-extrabold text-white mb-4",children:"Complete Your Profile"}),(0,s.jsx)("p",{className:"text-blue-100 text-lg",children:"Just one more step to get started with Smart Attendance"})]}),(0,s.jsx)("form",{className:"mt-8 space-y-6",onSubmit:handleSubmit,children:(0,s.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-8 border border-white/20 shadow-2xl",children:[(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-white mb-3",children:"Account Type"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>t({...e,role:"student",studentId:""}),className:"flex items-center justify-center p-4 border rounded-xl transition-all ".concat("student"===e.role?"border-yellow-400 bg-yellow-400/20 text-yellow-400 shadow-lg":"border-white/30 text-white hover:bg-white/10"),children:[(0,s.jsx)(d.Z,{className:"h-5 w-5 mr-2"}),"Student"]}),(0,s.jsxs)("button",{type:"button",onClick:()=>t({...e,role:"teacher",studentId:"",subject:""}),className:"flex items-center justify-center p-4 border rounded-xl transition-all ".concat("teacher"===e.role?"border-yellow-400 bg-yellow-400/20 text-yellow-400 shadow-lg":"border-white/30 text-white hover:bg-white/10"),children:[(0,s.jsx)(h.Z,{className:"h-5 w-5 mr-2"}),"Teacher"]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-white mb-2",children:"Full Name"}),(0,s.jsx)("input",{id:"name",name:"name",type:"text",required:!0,className:"w-full px-4 py-3 bg-white/10 border border-white/30 rounded-xl text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all",placeholder:"Enter your full name",value:e.name,onChange:handleChange})]}),"student"===e.role&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"studentId",className:"block text-sm font-medium text-white mb-2",children:"Student ID"}),(0,s.jsx)("input",{id:"studentId",name:"studentId",type:"text",required:!0,className:"w-full px-4 py-3 bg-white/10 border border-white/30 rounded-xl text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all",placeholder:"Enter your student ID",value:e.studentId,onChange:handleChange})]}),"teacher"===e.role&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"subject",className:"block text-sm font-medium text-white mb-2",children:"Subject *"}),(0,s.jsx)(x.Z,{value:e.subject,onChange:r=>t({...e,subject:r}),placeholder:"Enter your subject (e.g., Mathematics, Physics)",className:"w-full px-4 py-3 bg-white/10 border border-white/30 rounded-xl text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all",existingSubjects:r,required:!0}),(0,s.jsx)("p",{className:"text-xs text-blue-200 mt-1",children:"This will be used for creating and managing your classes"})]})]}),(0,s.jsx)("div",{className:"mt-8",children:(0,s.jsx)("button",{type:"submit",disabled:b,className:"group w-full bg-gradient-to-r from-yellow-400 to-orange-400 text-gray-900 hover:from-yellow-300 hover:to-orange-300 font-bold py-4 px-6 rounded-xl transition-all transform hover:scale-105 shadow-xl disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center",children:b?(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-5 h-5 border-2 border-gray-900/30 border-t-gray-900 rounded-full animate-spin mr-3"}),"Completing profile..."]}):(0,s.jsxs)(s.Fragment,{children:["Complete Profile",(0,s.jsx)(m.Z,{className:"ml-2 h-5 w-5 group-hover:translate-x-1 transition-transform"})]})})})]})})]})}):(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-600 via-purple-600 to-indigo-800 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"w-16 h-16 border-4 border-white/30 border-t-white rounded-full animate-spin mx-auto mb-4"}),(0,s.jsx)(c.Z,{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 h-6 w-6 text-white"})]}),(0,s.jsx)("p",{className:"text-white/80 text-lg",children:"Loading..."})]})})}},2907:function(e,t,r){"use strict";r.d(t,{Z:function(){return SubjectInput}});var s=r(5893),n=r(7294),l=r(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,l.Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var o=r(3761);let i=["Mathematics","Physics","Chemistry","Biology","Computer Science","English","History","Geography","Economics","Business Studies","Art","Music","Physical Education","Psychology","Philosophy","Political Science","Sociology","Statistics","Engineering","Medicine"];function SubjectInput(e){let{value:t,onChange:r,placeholder:l="Enter subject name",className:c="",required:u=!1,existingSubjects:d=[]}=e,[h,m]=(0,n.useState)(!1),[x,f]=(0,n.useState)([]),b=(0,n.useRef)(null),p=(0,n.useRef)(null),y=[...new Set([...d,...i])].sort();function handleInputChange(e){let t=e.target.value;r(t),m(!0)}function handleSubjectSelect(e){var t;r(e),m(!1),null===(t=b.current)||void 0===t||t.focus()}function handleInputFocus(){m(!0)}function handleKeyDown(e){"Escape"===e.key&&m(!1)}return(0,n.useEffect)(()=>{if(t){let e=y.filter(e=>e.toLowerCase().includes(t.toLowerCase())&&e.toLowerCase()!==t.toLowerCase());f(e.slice(0,8))}else f(y.slice(0,8))},[t,y]),(0,n.useEffect)(()=>{function handleClickOutside(e){!p.current||p.current.contains(e.target)||b.current.contains(e.target)||m(!1)}return document.addEventListener("mousedown",handleClickOutside),()=>document.removeEventListener("mousedown",handleClickOutside)},[]),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{ref:b,type:"text",value:t,onChange:handleInputChange,onFocus:handleInputFocus,onKeyDown:handleKeyDown,placeholder:l,required:u,className:"".concat(c," pr-10")}),(0,s.jsx)("button",{type:"button",onClick:()=>m(!h),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:(0,s.jsx)(a,{className:"h-4 w-4 transition-transform ".concat(h?"rotate-180":"")})})]}),h&&x.length>0&&(0,s.jsxs)("div",{ref:p,className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[(0,s.jsx)("div",{className:"py-1",children:x.map((e,t)=>(0,s.jsxs)("button",{type:"button",onClick:()=>handleSubjectSelect(e),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-700 transition-colors flex items-center",children:[(0,s.jsx)(o.Z,{className:"h-4 w-4 mr-2 text-gray-400"}),e]},t))}),t&&!y.some(e=>e.toLowerCase()===t.toLowerCase())&&(0,s.jsxs)("div",{className:"border-t border-gray-200 py-2 px-4",children:[(0,s.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Create new subject:"}),(0,s.jsxs)("button",{type:"button",onClick:()=>handleSubjectSelect(t),className:"w-full text-left text-sm text-blue-600 hover:text-blue-700 font-medium",children:['+ "',t,'"']})]})]})]})}},1163:function(e,t,r){e.exports=r(9974)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=7621)}),_N_E=e.O()}]);